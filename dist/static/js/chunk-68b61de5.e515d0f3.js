(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68b61de5"],{"6ca8":function(e,t,i){"use strict";i("a123a")},7207:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mixin-components-container"},[e._l(e.card_config,(function(t){return i("CardPanel",{key:t.unique_name,staticClass:"card",attrs:{config:t},on:{error:e.errCard},model:{value:t.valued,callback:function(i){e.$set(t,"valued",i)},expression:"item.valued"}})})),i("div",{staticClass:"bottom"},[i("el-button",{attrs:{round:""},on:{click:e.clickCancel}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",round:""},on:{click:e.clickOk}},[e._v("确认")])],1)],2)},l=[],r=(i("e680"),i("8dee"),i("c1d5")),_=(i("982e"),i("e186"),i("7590")),n=i("22ce"),d=i("7ab0"),c="http,tcp,grpc",s={name:"ServiceCreateHttp",components:{CardPanel:d["a"]},data:function(){return{card_config:[{display_name:"基本信息",sort:0,postion:"normal",unique_name:"base_info",items:[{field_type:"input",field_display:"inline",field_clear:"none",field_placeholder:"6-128位字母数字下划线",field_option:"",field_value:"",field_default_value:"",field_unique_name:"service_name",field_display_name:"服务名称",field_required:!0,field_valid_rule:""},{field_type:"input",field_display:"inline",field_clear:"none",field_placeholder:"最多255字符，必填",field_option:"",field_value:"",field_default_value:"",field_unique_name:"service_description",field_display_name:"服务描述",field_required:!0,field_valid_rule:""},{field_type:"input",field_display:"inline-block",field_clear:"none",field_placeholder:"",field_option:"",field_value:"",field_default_value:"",field_unique_name:"service_input_type",field_display_name:"接入类型",field_required:!0,field_valid_rule:""},{field_type:"select",field_display:"inline",field_clear:"right",field_placeholder:"",field_option:"0|1,路径|域名",field_value:"",field_default_value:"0",field_unique_name:"service_input_type_option",field_display_name:"接入类型选项",field_required:!1,field_valid_rule:""},{field_type:"select",field_display:"inline",field_clear:"none",field_placeholder:"",field_option:"0|1|2,https|strip_uri|websocket",field_value:"",field_default_value:"0",field_unique_name:"service_up_type",field_display_name:"支持类型",field_required:!0,field_valid_rule:""}]}],isEdit:!1,submitButDisabled:!1,form:{service_name:"",service_desc:"",rule_type:0,rule:"",need_https:0,need_websocket:0,need_strip_uri:1,url_rewrite:"",header_transfor:"",round_type:2,ip_list:"",disf_name:"",disf_cluster_name:"",weight_list:"",upstream_connect_timeout:"",upstream_header_timeout:"",upstream_idle_timeout:"",upstream_max_idle:"",open_auth:0,black_list:"",white_list:"",clientip_flow_limit:"",service_flow_limit:""}}},created:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$route.query&&this.$route.query.type,i=this.$route.params&&this.$route.params.id,!(i>0)){e.next=7;break}this.isEdit=!0,this.fetchData(i),e.next=12;break;case 7:if(!c.includes(t)){e.next=12;break}return e.next=10,Object(n["h"])();case 10:a=e.sent,this.card_config=[].concat(Object(r["a"])(this.card_config),Object(r["a"])(a.data[t]));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{clickCancel:function(e){console.log(this.base_card_config)},clickOk:function(e){console.log(this.base_card_config)},errCard:function(e){console.log(e)},fetchData:function(e){var t=this,i={id:e};Object(n["f"])(i).then((function(e){t.form.id=e.data.info.id,t.form.load_type=e.data.info.load_type,t.form.service_name=e.data.info.service_name,t.form.service_desc=e.data.info.service_desc,t.form.rule_type=e.data.http_rule.rule_type,t.form.rule=e.data.http_rule.rule,t.form.need_https=e.data.http_rule.need_https,t.form.need_websocket=e.data.http_rule.need_websocket,t.form.need_strip_uri=e.data.http_rule.need_strip_uri,t.form.url_rewrite=e.data.http_rule.url_rewrite.replace(/,/g,"\n"),t.form.header_transfor=e.data.http_rule.header_transfor.replace(/,/g,"\n"),t.form.round_type=e.data.load_balance.round_type,t.form.disf_name=e.data.load_balance.disf_name,t.form.disf_cluster_name=e.data.load_balance.disf_cluster_name,t.form.ip_list=e.data.load_balance.ip_list.replace(/,/g,"\n"),t.form.weight_list=e.data.load_balance.weight_list.replace(/,/g,"\n"),t.form.upstream_connect_timeout=e.data.load_balance.upstream_connect_timeout,t.form.upstream_header_timeout=e.data.load_balance.upstream_header_timeout,t.form.upstream_idle_timeout=e.data.load_balance.upstream_idle_timeout,t.form.upstream_max_idle=e.data.load_balance.upstream_max_idle,t.form.upstream_max_idle=e.data.load_balance.upstream_max_idle,t.form.open_auth=e.data.access_control.open_auth,t.form.black_list=e.data.access_control.black_list.replace(/,/g,"\n"),t.form.white_list=e.data.access_control.white_list.replace(/,/g,"\n"),t.form.clientip_flow_limit=e.data.access_control.clientip_flow_limit,t.form.service_flow_limit=e.data.access_control.service_flow_limit})).catch((function(){}))},handleSubmit:function(){var e=this;this.submitButDisabled=!0;var t=Object.assign({},this.form);t.url_rewrite=t.url_rewrite.replace(/\n/g,","),t.header_transfor=t.header_transfor.replace(/\n/g,","),t.ip_list=t.ip_list.replace(/\n/g,","),t.weight_list=t.weight_list.replace(/\n/g,","),t.black_list=t.black_list.replace(/\n/g,","),t.white_list=t.white_list.replace(/\n/g,","),t.service_flow_limit=Number(t.service_flow_limit),t.clientip_flow_limit=Number(t.clientip_flow_limit),t.upstream_connect_timeout=Number(t.upstream_connect_timeout),t.upstream_header_timeout=Number(t.upstream_header_timeout),t.upstream_idle_timeout=Number(t.upstream_idle_timeout),t.upstream_max_idle=Number(t.upstream_max_idle),this.isEdit?Object(n["serviceUpdateHttp"])(t).then((function(t){e.submitButDisabled=!1,e.$notify({title:"Success",message:"修改成功",type:"success",duration:2e3})})).catch((function(){e.submitButDisabled=!1})):Object(n["serviceAddHttp"])(t).then((function(t){e.submitButDisabled=!1,e.$notify({title:"Success",message:"添加成功",type:"success",duration:2e3})})).catch((function(){e.submitButDisabled=!1}))}}},o=s,u=(i("6ca8"),i("cba8")),f=Object(u["a"])(o,a,l,!1,null,"e17f2ec0",null);t["default"]=f.exports},a123a:function(e,t,i){}}]);